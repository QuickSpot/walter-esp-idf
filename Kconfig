menu "walter-modem"
    config WALTER_MODEM_KCONFIG
            bool "Enable Kconfig"
            default y
            help
                enable Kconfig for Walter Modem.

    if WALTER_MODEM_KCONFIG
        menu "Protocols"
            config WALTER_MODEM_ENABLE_SOCKETS
                bool "Enable Socket functions"
                default y
                help
                    Enable socket functions.

            if WALTER_MODEM_ENABLE_SOCKETS
                menu "Socket (TCP/UDP)"
                    
                endmenu
            endif

            config WALTER_MODEM_ENABLE_MQTT
                bool "Enable MQTT functions"
                default y
                help
                    Enable MQTT support for the WalterModem.
            
            if WALTER_MODEM_ENABLE_MQTT
                menu "MQTT"

                endmenu
            endif

            config WALTER_MODEM_ENABLE_GNSS
                bool "Enable GNSS functions"
                default y
                help
                    Enable socket ofloading functions.
            
            if WALTER_MODEM_ENABLE_GNSS
                menu "GNSS"
                    
                endmenu
            endif

            config WALTER_MODEM_ENABLE_HTTP
                bool "Enable HTTP functions"
                default y
                help
                    Enable HTTP ofloading functions.
            
            if WALTER_MODEM_ENABLE_HTTP
                menu "HTTP"
                    
                endmenu
            endif
            
        endmenu
        menu "Pinout"
            if WALTER_MODEM_KCONFIG
                config WALTER_MODEM_PIN_RX
                    int "RX"
                    default 14
                    help
                        The RX pin on which modem data is received.

                config WALTER_MODEM_PIN_TX
                    int "TX"
                    default 48
                    help
                        The TX to which modem data must be transmitted.
                
                config WALTER_MODEM_PIN_RTS
                    int "RTS"
                    default 21
                    help
                        The RTS pin on the ESP32 side.
                
                config WALTER_MODEM_PIN_CTS
                    int "CTS"
                    default 47
                    help
                        The CTS pin on the ESP32 size.
                    
                config WALTER_MODEM_PIN_RESET
                    int "Reset pin"
                    default 45
                    help
                        The active low modem reset pin.
            endif
        endmenu
        menu "UART"
            config WALTER_MODEM_BAUD
                int "The modem BAUD rate"
                default 115200
                help 
                    The baud rate used to talk to the modem.
            
            config UART_BUF_SIZE
                int "Uart buffer size"
                default 128
                help
                    The uart buffer size for modem communication.
        endmenu
        menu "AT Commands"
            config WALTER_MODEM_CMD_TIMEOUT_MS
                int "Default cmd timeout in MS"
                default 300000
                help
                    The maximum number of milliseconds to wait.
            
            config WALTER_MODEM_MAX_PENDING_COMMANDS
                int "The maximum commands that can be pending at one moment"
                default 32
                help
                    The maximum number of pending commands. 
            
            config WALTER_MODEM_DEFAULT_CMD_ATTEMTS
                int "Number of attempts to execute a command"
                default 3
                range 1 6
                help
                    The default number of attempts to execute a command.
            
            config WALTER_MODEM_COMMAND_MAX_ELEMS
                int "Number of elements allowed to build an AT command."
                default 63
                help
                    The maximum number of elements allowed to build an AT command.
        endmenu
        menu "modem task"
            config WALTER_MODEM_TASK_QUEUE_MAX_ITEMS
                int "Queue Mac items"
                range 10 255
                default 32
                help
                    The maximum number of items in the task queue.
            
            config WALTER_MODEM_TASK_STACK_SIZE
                int "The stack size of the modem task in bytes"
                default 4096
                range 2048 8192
                help
                    The size of the stack of the command and response processing task.

            menu "Events"
                config WALTER_MODEM_MAX_EVENT_DURATION_MS
                    int "Max event handler duration in MS"
                    default 500
                    help
                        The event handlers of the Walter modem library are as lightweight as possible and are not
                        executed in their own thread. Therefore an application should handle them as interrupt handlers.
                        It is not allowed to call other WalterModem functions from within an event handler and no
                        blocking operations should be performed in an event handler. To aid the user in achieving this
                        the library prints a warning when the handler takes more than the defined number of milliseconds.
            endmenu
        endmenu
    endif
endmenu